"use strict";(self.webpackChunkWAsP=self.webpackChunkWAsP||[]).push([[254],{9254:(D,h,n)=>{n.r(h),n.d(h,{ComplianceModule:()=>J});var c=n(9808),f=n(9706),i=n(3075),t=n(5e3),S=n(5826),A=n(6123),r=n(7322),g=n(7531),m=n(3092),C=n(508),T=n(7423);function Z(e,l){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function y(e,l){1&e&&(t.TgZ(0,"button",10),t._uU(1,"Export To PDF"),t.qZA())}function b(e,l){1&e&&(t.TgZ(0,"div",null,11)(2,"p"),t._uU(3,"hello"),t.qZA()())}const F=[{path:"",component:(()=>{class e{constructor(o,s){this.specificationService=o,this.realtimeSerivce=s,this.showTask=!1,this.maxDate=new Date}ngOnInit(){this.realtimeSerivce.getTaskData().subscribe(o=>{this.allTasks=o,this.loadTasks()}),this.specificationService.getAllContracts().subscribe(o=>{this.allContracts=o,this.loadContracts(),console.log(this.allContracts)}),this.contractForm=new i.cw({contractName:new i.NI("")})}loadContracts(){let o=[];for(let a=0;a<this.allContracts.length;a++)o.push(String(this.allContracts[a].ContractName));let s=[...new Set(o)];this.contracts=s.sort()}contractSubmit(){if(console.log(this.contractForm),!this.contractForm.value.contractName)return void alert("Please select a contract");let o=[];for(var s in this.allContracts)this.allContracts[s].ContractName===this.contractForm.value.contractName&&o.push(this.allContracts[s]);if(console.log(o),o.length>0){let d=[];for(var a in o)this.specificationService.getSpec(o[a].WPS_No).subscribe(p=>d.push(p));this.wps=d,console.log(this.wps);let k=[];for(var v in o){console.log(o[v].TaskID);let p=String(o[v].TaskID);console.log(p),this.realtimeSerivce.getRTTask("1").subscribe(R=>k=R)}console.log(k),console.log([])}}loadTasks(){let o=[];for(let a=0;a<this.allTasks.length;a++)o.push(String(this.allTasks[a].TaskID));let s=[...new Set(o)];this.tasks=s.sort(),this.filteredTasks=this.tasks}taskOnKey(o){this.filteredTasks=this.taskSearch(o.target.value)}taskSearch(o){let s=o.toLocaleLowerCase();return this.tasks.filter(a=>a.toLocaleLowerCase().includes(s))}taskSubmit(){console.log(this.contractForm),this.contractForm.value.taskID?(this.getRealtimeTask(this.contractForm.value.taskID),this.showTask=!0,console.log(this.RTtask)):alert("Please select a task ID")}getRealtimeTask(o){this.realtimeSerivce.getRTTask(o).subscribe(s=>this.RTtask=s),console.log(this.RTtask)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(S.S),t.Y36(A.i))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-compliance"]],decls:17,vars:5,consts:[[1,"weld-history-form",3,"formGroup","ngSubmit"],["appearance","outline"],["type","text","formControlName","contractName","matInput","","required","",3,"matAutocomplete","keyup"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit"],["mat-stroked-button","","color","primary","type","submit",4,"ngIf"],[4,"ngIf"],[3,"value"],["mat-stroked-button","","color","primary","type","submit"],["pdfWelders",""]],template:function(o,s){if(1&o&&(t.TgZ(0,"h1"),t._uU(1,"Compliance Report"),t.qZA(),t.TgZ(2,"div")(3,"form",0),t.NdJ("ngSubmit",function(){return s.contractSubmit()}),t.TgZ(4,"mat-label"),t._uU(5,"Select:"),t.qZA(),t.TgZ(6,"mat-form-field",1)(7,"mat-label"),t._uU(8,"Task ID"),t.qZA(),t.TgZ(9,"input",2),t.NdJ("keyup",function(u){return s.taskOnKey(u)}),t.qZA(),t.TgZ(10,"mat-autocomplete",3,4),t.YNc(12,Z,2,2,"mat-option",5),t.qZA()(),t.TgZ(13,"button",6),t._uU(14,"Run Report"),t.qZA(),t.YNc(15,y,2,0,"button",7),t.qZA(),t.YNc(16,b,4,0,"div",8),t.qZA()),2&o){const a=t.MAs(11);t.xp6(3),t.Q6J("formGroup",s.contractForm),t.xp6(6),t.Q6J("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",s.contracts),t.xp6(3),t.Q6J("ngIf",s.showTask),t.xp6(1),t.Q6J("ngIf",s.showTask)}},directives:[i._Y,i.JL,i.sg,r.hX,r.KE,i.Fj,g.Nt,m.ZL,i.JJ,i.u,i.Q7,m.XC,c.sg,C.ey,T.lW,c.O5],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(F)],f.Bz]}),e})();var I=n(6856);let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,N,r.lN,i.u5,i.UX,I.FA,m.Bb,g.c,C.XK,T.ot]]}),e})()}}]);