<h4 hidden>Machine {{realtime[0].MachineID}}</h4>

<mat-accordion multi>

    <mat-expansion-panel *ngFor="let task of allRealtime" [expanded]="true" id="history">
        <mat-expansion-panel-header>
            <mat-panel-title>
                Task ID: {{ task[0].TaskID }}
            </mat-panel-title>
            <mat-panel-description>
                Welder ID: {{ task[0].WelderID }}
            </mat-panel-description>
        </mat-expansion-panel-header>

        <div *ngIf="!validTaskID.includes(task[0].TaskID)"><p>No WPS data available</p></div>

        <div *ngIf="validTaskID.includes(task[0].TaskID)">
            
            <h4>WPS</h4>

            <table>
                <tr>
                    <td>WPS No</td>
                    <td>Run No</td>
                    <td>Welding Code</td>
                    <td>Class</td>
                    <td>Gas Flux Type</td>
                    <td>Joint Type</td>
                    <td>Polarity</td>
                    <td>Position</td>
                    <td>Side</td>
                    <td>Size</td>
                    <td>Current</td>
                    <td>Voltage</td>
                    <td>HeatInput</td>
                    <td>Interpass Temp</td>
                    <td>Travel Speed</td>


                </tr>


                <tr *ngFor="let w of wps[validTaskID.indexOf(task[0].TaskID)]">
                    <td>{{ w.WPS_No }}</td>
                    <td>{{ w.Run_No }}</td>
                    <td>{{ w.Welding_Code }}</td>
                    <td>{{ w.Class }}</td>
                    <td>{{ w.Gas_Flux_Type }}</td>
                    <td>{{ w.Joint_type }}</td>
                    <td>{{ w.Polarity }}</td>
                    <td>{{ w.Position }}</td>
                    <td>{{ w.Side }}</td>
                    <td>{{ w.Size }}</td>
                    <td>{{ w.Current_Min }} - {{ w.Current_Max}}</td>
                    <td>{{ w.Voltage_Min }} - {{ w.Voltage_Max}}</td>
                    <td>{{ w.HeatInput_Min }} - {{ w.HeatInput_Max}}</td>
                    <td>{{ w.InterpassTemp_Min }} - {{ w.InterpassTemp_Max}}</td>
                    <td>{{ w.TravelSpeed_Min }} - {{ w.TravelSpeed_Max}}</td>
                </tr>
            </table>
        
        </div>

        <!--Inner tabs-->

        <mat-accordion multi>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Detailed Weld History 
                </mat-panel-title>
            </mat-expansion-panel-header>
            <table>
                <tr>
                    <td>Datetime</td>
                    <td>Current</td>
                    <td>Voltage</td>
                    <td>GasUsed</td>
                    <td>HeatInput</td>
                    <td>Length</td>
                    <td>Power</td>
                    <td>RunNo</td>
                    <td>Temperature</td>
                    <td>TimeDelta</td>
                    <td>TravelSpeed</td>
                </tr>


                <tr *ngFor="let rt of task">
                    <td>{{ rt.Time }}</td>
                    <td>{{ rt.Current }}</td>
                    <td>{{ rt.Voltage }}</td>
                    <td>{{ rt.GasUsed }}</td>
                    <td>{{ rt.HeatInput }}</td>
                    <td>{{ rt.Length }}</td>
                    <td>{{ rt.Power }}</td>
                    <td>{{ rt.RunNo }}</td>
                    <td>{{ rt.Temperature }}</td>
                    <td>{{ rt.Timedelta }}</td>
                    <td>{{ rt.TravelSpeed }}</td>
                </tr>
            </table>
        </mat-expansion-panel>
    </mat-accordion>

    </mat-expansion-panel>

</mat-accordion>